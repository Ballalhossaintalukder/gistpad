<form action="https://codepen.io/pen/define" method="POST">
  <input type="hidden" name="data" />
</form>

<script>
  const data = window.location.search.replace("?pen=", "");

  if (data) {
    const metadataUrl = decodeURIComponent(data);

    const xhr = new XMLHttpRequest();
    xhr.open("GET", metadataUrl);
    xhr.onload = () => {
      if (xhr.status == 200) {
        const data = xhr.response.replace(/"/g, "&quot;");

        document
          .querySelector("input[type='hidden']")
          .setAttribute("value", data);

        document.querySelector("form").submit();
      }
    };

    xhr.send();
  }
</script>
